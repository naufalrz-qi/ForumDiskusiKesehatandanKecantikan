{% extends 'base_after.html' %}

{% block head %}
    <title>{{ user_info.profile_name }}'s profile</title>
{% endblock %}
{% block title %}
    <p class="has-text-weight-bold">Profile</p>
{% endblock %}
{% block body %}
<div class="card w-100 p-5 my-3 " style="border-radius: 20px; ">
    <div class="card-body">

        <div class="d-flex flex-row">
            
            <figure class="image is-96x96">
                <img class="is-rounded" src="../static/{{ user_info.profile_pic_real }}" alt="Image">
            </figure>
            

            <div class="d-flex flex-column my-5">
                <p class="h3 has-text-weight-bold m-0"> {{ user_info.profile_name }} </p>
                <small class="has-text-weight-light text-body-tertiary"> @{{ user_info.username }} </small>
            </div>
            
        </div>

        <div>  
            
            <p class="mt-3">
                {{ user_info.profile_info }}
            </p>
            {% if status %}
            

            <nav id="btns-me" class="level is-mobile">
                        <a
                            class="button level-item has-text-centered is-primary"
                            aria-label="edit"
                            onclick='$("#modal-edit").addClass("is-active")'
                        >
                            Edit Profile&nbsp;&nbsp;&nbsp;<span class="icon is-small"
                            ><i class="fa fa-pencil" aria-hidden="true"></i
                            ></span>
                        </a>
                        
                        <div class="modal" id="modal-edit">
                            <div
                                class="modal-background"
                                onclick='$("#modal-edit").removeClass("is-active")'
                            ></div>
                            <div class="modal-content">
                                <div class="box h-100">
                                <article class="media p-5">
                                    <div class="media-content">
                                    <div class="field">
                                        <label class="label" for="input-name">Name</label>
                                        <p class="control">
                                        <input
                                            id="input-name"
                                            class="input"
                                            placeholder="Your name"
                                            value="{{ user_info.profile_name }}"
                                        />
                                        </p>
                                    </div>
                                    <div class="field">
                                        <label class="label" for="input-pic">Profile Picture</label>
                        
                                        <div class="control is-expanded">
                                        <div class="file has-name">
                                            <label class="file-label" style="width: 100%">
                                            <input
                                                id="input-pic"
                                                class="file-input"
                                                type="file"
                                                name="resume"
                                            />
                                            <span class="file-cta"
                                                ><span class="file-icon"
                                                ><i class="fa fa-upload"></i
                                                ></span>
                                                <span class="file-label">Select a file</span>
                                            </span>
                                            <span
                                                id="file-name"
                                                class="file-name"
                                                style="width: 100%; max-width: 100%"
                                                >{{ user_info.profile_pic }}</span
                                            >
                                            </label>
                                        </div>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label class="label" for="textarea-about">Who am I?</label>
                        
                                        <p class="control">
                                        <textarea
                                            id="textarea-about"
                                            class="textarea"
                                            placeholder="Introduce yourself"
                                        >{{ user_info.profile_info }}</textarea
                                        >
                                        </p>
                                    </div>
                                    <nav class="level is-mobile">
                                        <div class="level-left"></div>
                                        <div class="level-right">
                                        <div class="level-item">
                                            <a class="button is-primary" onclick="update_profile()"
                                            >Update</a
                                            >
                                        </div>
                                        <div class="level-item">
                                            <a
                                            class="button is-primary is-outlined"
                                            onclick='$("#modal-edit").removeClass("is-active")'
                                            >Cancel</a
                                            >
                                        </div>
                                        </div>
                                    </nav>
                                    </div>
                                </article>
                                </div>
                            </div>
                            <button
                                class="modal-close is-large"
                                aria-label="close"
                                onclick='$("#modal-edit").removeClass("is-active")'
                            ></button>
                            </div>
            
                        <a
                            class="button level-item has-text-centered is-primary is-outlined"
                            aria-label="logout"
                            onclick="sign_out()"
                        >
                            Sign Out&nbsp;&nbsp;&nbsp;<span class="icon is-small"
                            ><i class="fa fa-sign-out" aria-hidden="true"></i
                            ></span>
                        </a>
            </nav>
            {% endif %}
        </div>
      
        
        
    </div>
  </div>
{% endblock %}

{% block script %}
    <script>

        $(document).ready(function () {
            $(".sidebar2").addClass('is-hidden')
            $('.content').addClass('me-0')
        });

    </script>
{% endblock %}
